
<section class="products-section">
  <div class="products-container">

    <div class="section-header">
      <div class="section-chip">Productos Disponibles</div>
    </div>

    <div class="products-toolbar">
      <div class="products-counter">
        <span class="counter-pill">
          <i class="fas fa-box-open"></i>
          {{ products.length }} productos encontrados<span *ngIf="selectedProvinceName"> en {{selectedProvinceName}}</span>
        </span>

      </div>


    </div>

<div class="products-grid">

  <!-- Placeholder cards mientras carga -->
  <ng-container *ngIf="products.length === 0">
    <!-- Mensaje cuando no hay productos -->
    <div class="empty-state" *ngIf="!isLoading">
      <div class="empty-icon">
        <i class="fas fa-shopping-bag"></i>
      </div>
      <h3>No hay productos disponibles</h3>
      <p>Actualmente no hay productos en esta ubicación. ¡Vuelve pronto para ver nuevas ofertas!</p>
    </div>
    
    <!-- Solo 3 skeleton cards para loading -->
    <article class="product-card placeholder" *ngFor="let i of [1,2,3]" [style.display]="isLoading ? 'block' : 'none'">
      <div class="product-card-glow"></div>

      <div class="product-image skeleton-box"></div>

      <div class="product-info">
        <div class="product-header">
          <h3 class="product-title skeleton-text"></h3>
          <span class="product-chip-year skeleton-text"></span>
        </div>
        <div class="product-specs">
          <div class="spec skeleton-text"></div>
          <div class="spec skeleton-text"></div>
        </div>
        <div class="product-footer">
          <div class="product-price-block">
            <div class="product-price skeleton-text"></div>
            <div class="product-price-note skeleton-text"></div>
          </div>
          <button class="btn-primary skeleton-button"></button>
        </div>
      </div>
    </article>
  </ng-container>

  <!-- Productos reales -->
  <article
    class="product-card"
    *ngFor="let product of products"
    [class.featured]="product.featured">

    <div class="product-card-glow"></div>

    <div class="product-badge" *ngIf="product.featured">
      <i class="fas fa-crown"></i>
      Destacado
    </div>

    <div class="product-image">
      <img
        [src]="product.img"
        [alt]="product.title"
        (error)="onImageError($event)"
      />
      <div class="image-fallback">
        <i class="fas fa-shopping-bag"></i>
      </div>
      <div class="product-overlay">
        <button class="btn-view" (click)="viewProduct(product.id_product)">
          <i class="fas fa-eye"></i> Ver detalles
        </button>
        <button class="btn-contact" (click)="viewProduct(product.id_product)">
          <i class="fas fa-comment-alt"></i> Estoy interesado
        </button>
      </div>
    </div>

    <div class="product-info">
      <div class="product-header">
        <h3 class="product-title">{{ product.title }}</h3>
        <span class="product-chip-year" *ngIf="product.year">
          {{ product.year }}
        </span>
      </div>

      <div class="product-specs">
        <div class="spec">
          <i class="fas fa-map-marker-alt"></i>
          <span>{{ product.location }}</span>
        </div>
        <div class="spec">
          <i class="fas fa-star"></i> Calidad verificada
        </div>
      </div>

      <div class="product-footer">
        <div class="product-price-block">
          <div class="product-price">{{ formatPrice(product.price) }}</div>
          <div class="product-price-note">Precio referencial en Ecuador</div>
        </div>
        <button class="btn-primary" (click)="viewProduct(product.id_product)">
          <i class="fas fa-shopping-cart"></i> Interesado
        </button>
      </div>
    </div>

  </article>
</div>

  </div>
</section>
